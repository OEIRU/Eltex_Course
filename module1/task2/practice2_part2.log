# 2.2.1 Найдите все записи из лога загрузки, доступного через команду journalctl с опцией -b в первые
полторы секунды с момента загрузки

---- ----- 

# 2.2.2. Используя awk найдите все источники и их сообщения в файле auth.log (найдите его find), в
названии источника удалите информацию об идентификаторе процесса при помощи sed,
полученный результат отсортируйте по названию источника

root@eltex-practice2-pg2-v15:~# awk '{print $3, $4, $5, $6, $7, $8, $9, $10, $11}' /var/log/auth.log | sed 's/\[[0-9]*\]//g' | sort | uniq -c | sort -nr
    244 CRON: pam_unix(cron:session): session opened for user root(uid=0) by root(uid=0)
    244 CRON: pam_unix(cron:session): session closed for user root
      2 (systemd): pam_unix(systemd-user:session): session opened for user root(uid=0) by root(uid=0)
      2 sudo: root : TTY=pts/0 ; PWD=/root ; USER=root ;
      2 sudo: pam_unix(sudo:session): session opened for user root(uid=0) by root(uid=0)
      2 sudo: pam_unix(sudo:session): session closed for user root
      2 sshd: pam_unix(sshd:session): session opened for user root(uid=0) by root(uid=0)
      1 systemd-logind: Session 1234 logged out. Waiting for processes to
      1 systemd-logind: Removed session 1234.
      1 systemd-logind: New session 1257 of user root.
      1 systemd-logind: New session 1234 of user root.
      1 sshd: Server listening on :: port 22.
      1 sshd: Received disconnect from 172.16.8.2 port 33528:11: disconnected by
      1 sshd: pam_unix(sshd:session): session closed for user root
      1 sshd: Disconnected from user root 172.16.8.2 port 33528
      1 sshd: Accepted publickey for root from 172.16.8.2 port 57270
      1 sshd: Accepted publickey for root from 172.16.8.2 port 33528

root@eltex-practice2-pg2-v15:~# find / -name "auth.log"
/var/log/auth.log

# 2.2.3. Для результата из предыдущего пункта найдите количество повторений для каждого источника
и выведите их в виде списка «число_повторений источник», результат отсортируйте по
убыванию количества повторений


# 2.2.4. В файле /etc/passwd найдите всех пользователей в системе, у которых установлен shell
/usr/sbin/nologin и выведите их в виде списка: «UID, username, список его групп»,
отсортированный в обратном порядке по UID, cписок групп используйте из файла /etc/group

root@eltex-practice2-pg2-v15:~# awk -F: 'NR==FNR {uid[$1]=$3; next} {split($4, users, ","); for (i in users) if (users[i] in uid) print uid[users[i]], users[i], $1}' /etc/passwd /etc/group | sort -k1,1nr
1003 user3 group1
1003 user3 users
1002 user2 group1
1002 user2 users
1001 user1 group1
1001 user1 sudo
1000 tech adm
1000 tech cdrom
1000 tech dip
1000 tech lxd
1000 tech plugdev
1000 tech sudo
103 syslog adm

# 2.2.5. Найдите в результате вывода dmesg все строки, содержащие слово 'kernel‘

root@eltex-practice2-pg2-v15:~#  dmesg | grep 'kernel'
[    0.044585] Booting paravirtualized kernel on KVM
[    0.044939] Unknown kernel command line parameters "BOOT_IMAGE=/vmlinuz-6.8.0-57-generic", will be passed to user space.
[    0.094038] Memory: 3933496K/4193760K available (22528K kernel code, 4444K rwdata, 14344K rodata, 4988K init, 4716K bss, 260004K reserved, 0K cma-reserved)
[    0.455877] Loaded X.509 cert 'Build time autogenerated kernel key: 314db5b871207b67c6af73164cb9641e90a23972'
[    0.643666] Loaded X.509 cert 'Build time autogenerated kernel key: 314db5b871207b67c6af73164cb9641e90a23972'
[    0.676919] Freeing unused kernel image (initmem) memory: 4988K
[    0.677986] Write protecting the kernel read-only data: 38912k
[    0.680387] Freeing unused kernel image (rodata/data gap) memory: 2040K
[   28.674943] systemd[1]: Listening on systemd-udevd-kernel.socket - udev Kernel Socket.
[   28.685397] systemd[1]: Mounting sys-kernel-debug.mount - Kernel Debug File System...
[   28.689834] systemd[1]: Mounting sys-kernel-tracing.mount - Kernel Trace File System...

# 2.2.6. Подсчитайте количество строк в файле /var/log/kern.log

root@eltex-practice2-pg2-v15:~#  wc  -l /var/log/kern.log
33 /var/log/kern.log

# 2.2.7 Отформатируйте вывод записей в /var/log/apt/history.log в следующем порядке, построчно:
Commandline: … ; Start-Date: … ; End-Date: …

---- ----